0000	COPY	START	0
0000	FIRST	STL	RETADR
0003		LDB	#LENGTH
0006		BASE	LENGTH
0006	CLOOP	+JSUB	RDREC
000A		LDA	LENGTH
000D		COMP	#0
0010		JEQ	ENDFIL
0013		+JSUB	WRREC
0017		J	CLOOP
001A	ENDFIL	LDA	=C'EOF X'
001D		STA	BUFFER
0020		LDA	#3
0023		STA	LENGTH
0026		+JSUB	WRREC
002A		J	@RETADR
002D	=C'EOF X'	BYTE	C'EOF X'
0032	RETADR	RESW	1
0035	LENGTH	RESW	1
0038	BUFFER	RESB	4096
1038	BUFFEND	EQU	*
1038	MAXLEN	EQU	BUFFEND-BUFFER+100
.
. SUBROUTINE TO READ RECORD
.
1038	RDREC	CLEAR	X
103A		CLEAR	A
103C		CLEAR	S
103E		+LDT	#MAXLEN
1042	RLOOP	TD	INPUT
1045		JEQ	RLOOP
1048		RD	INPUT
104B		COMPR	A,S
104D		JEQ	EXIT
1050		STCH	BUFFER,X
1053		TIXR	T
1055		JLT	RLOOP
1058	EXIT	STX	LENGTH
105B		RSUB	
105E	INPUT	BYTE	X'F1'
105F	WRREC	CLEAR	X
1061		LDT	LENGTH
1064	WLOOP	TD	=X'05'
1067		JEQ	WLOOP
106A		LDCH	BUFFER,X
106D		WD	=X'05'
1070		TIXR	T
1072		JLT	WLOOP
1075		RSUB	
1078	=X'05'	BYTE	X'05'
1079		END	FIRST
